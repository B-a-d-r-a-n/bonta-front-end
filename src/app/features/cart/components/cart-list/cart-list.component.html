'''<div class="bg-gray-50 dark:bg-slate-900 min-h-screen">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
    <!-- Loading State -->
    @if (cartService.basketQuery.isPending() && !cartService.basketQuery.data())
    {
    <div class="flex justify-center items-center h-96">
      <p-progressSpinner aria-label="Loading cart" />
    </div>
    }
    <!-- Error State -->
    @else if (cartService.basketQuery.isError()) {
    <div
      class="text-center py-20 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-red-200"
    >
      <i class="pi pi-exclamation-triangle text-6xl text-red-500 mb-6"></i>
      <h2 class="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2">
        Something Went Wrong
      </h2>
      <p-button
        label="Try Again"
        icon="pi pi-refresh"
        (click)="cartService.basketQuery.refetch()"
      />
    </div>
    }
    <!-- Empty Cart State -->
    @else if (!cartService.items().length) {
    <div
      class="text-center py-20 bg-white dark:bg-slate-800 rounded-2xl shadow-lg"
    >
      <i class="pi pi-shopping-cart text-7xl text-gray-400 mb-6"></i>
      <h2 class="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2">
        Your Cart is Empty
      </h2>
      <p class="text-gray-500 dark:text-gray-400 mb-8">
        Add items to your cart to see them here.
      </p>
      <p-button label="Start Shopping" routerLink="/products" size="large" />
    </div>
    }
    <!-- Cart with Items -->
    @else {
    <div class="flex justify-between items-center mb-12">
      <h1
        class="text-4xl font-bold tracking-tight text-gray-900 dark:text-gray-100"
      >
        Your Shopping Cart
      </h1>
      <p-button
        label="Clear Cart"
        icon="pi pi-trash"
        (onClick)="clearCart()"
        severity="danger"
        [outlined]="true"
      ></p-button>
    </div>
    <div class="grid lg:grid-cols-12 gap-8 lg:gap-12 items-start">
      <!-- Cart Items List -->
      <div class="lg:col-span-8 space-y-4">
        @for (item of cartService.items(); track item.id) {
        <div
          class="flex items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300"
        >
          <img
            [src]="item.pictureUrl"
            [alt]="item.productName"
            class="w-28 h-28 object-cover rounded-lg flex-shrink-0"
          />
          <div class="flex-grow grid grid-cols-3 items-center gap-4">
            <!-- Product Info -->
            <div class="col-span-3 sm:col-span-1">
              <h3
                class="font-semibold text-lg text-gray-800 dark:text-gray-100 line-clamp-2"
              >
                {{ item.productName }}
              </h3>
              <p class="text-gray-500 dark:text-gray-400">
                {{ item.price | currency }} / unit
              </p>
            </div>
            <!-- Quantity Control -->
            <div
              class="col-span-2 sm:col-span-1 flex justify-start sm:justify-center"
            >
              <p-inputNumber
                [ngModel]="item.quantity"
                (ngModelChange)="onQuantityChange(item.id, $event)"
                [min]="1"
                [max]="99"
                [showButtons]="true"
                buttonLayout="horizontal"
                [disabled]="cartService.updateBasketMutation.isPending()"
                styleClass="w-32"
              ></p-inputNumber>
            </div>
            <!-- Total & Remove -->
            <div class="col-span-1 flex items-center justify-end gap-4">
              <p
                class="font-bold text-lg text-gray-900 dark:text-gray-100 w-24 text-right"
              >
                {{ item.price * item.quantity | currency }}
              </p>
              <p-button
                icon="pi pi-trash"
                severity="danger"
                [rounded]="true"
                [text]="true"
                (onClick)="removeItem(item)"
                [disabled]="cartService.updateBasketMutation.isPending()"
              />
            </div>
          </div>
        </div>
        }
        <!-- Update Cart Button -->
        @if(cartService.isDirty()) {
        <div class="flex justify-end pt-4">
          <p-button
            label="Update Cart"
            icon="pi pi-check"
            (onClick)="cartService.updateCart()"
            [loading]="cartService.updateBasketMutation.isPending()"
            styleClass="p-button-success"
          />
        </div>
        }
      </div>

      <!-- Order Summary -->
      <div class="lg:col-span-4 sticky top-24">
        <div
          class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 space-y-4"
        >
          <h2
            class="text-2xl font-bold text-gray-900 dark:text-gray-100 border-b pb-4 dark:border-slate-700"
          >
            Order Summary
          </h2>
          <div
            class="flex justify-between text-lg text-gray-600 dark:text-gray-300"
          >
            <span>Subtotal</span
            ><span class="font-medium text-gray-900 dark:text-gray-100">{{ 
              cartService.subtotal() | currency 
            }}</span>
          </div>
          <div
            class="flex justify-between text-lg text-gray-600 dark:text-gray-300"
          >
            <span>Shipping</span
            ><span class="font-medium text-gray-900 dark:text-gray-100">{{ 
              cartService.basketQuery.data()?.shippingPrice | currency 
            }}</span>
          </div>
          <hr class="my-2 border-gray-200 dark:border-slate-700" />
          <div
            class="flex justify-between text-2xl font-bold text-gray-900 dark:text-gray-100"
          >
            <span>Total</span
            ><span>{{ cartService.totalPrice() | currency }}</span>
          </div>
          <p-button
            label="Proceed to Checkout"
            icon="pi pi-lock"
            styleClass="w-full justify-center"
            size="large"
            routerLink="/orders/checkout"
            [disabled]="
              cartService.isDirty() ||
              cartService.updateBasketMutation.isPending()
            "
            pTooltip="Please update your cart before proceeding"
            [tooltipDisabled]="!cartService.isDirty()"
          />
        </div>
      </div>
    </div>
    }
  </div>
</div>
'''

<div class="container mx-auto px-4 py-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold text-gray-900 mb-8">User Profile</h1>

    @if (profileQuery.isPending()) {
    <div class="flex justify-center items-center h-64">
      <p-progress-spinner class="w-12 h-12" />
    </div>
    } @if (profileQuery.error()) {
    <p-message severity="error" size="small" variant="simple" class="mb-4">
      Failed to load profile information.
    </p-message>
    } @if (profileQuery.data()) {
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Profile Information -->
      <div class="lg:col-span-2">
        <p-card header="Profile Information" styleClass="h-fit shadow-md">
          <div class="space-y-4">
            <div class="flex items-center justify-between">
              <span class="font-semibold text-gray-700">Email:</span>
              <span class="text-gray-900">{{
                profileQuery.data()?.email
              }}</span>
            </div>
            <p-divider></p-divider>
            <div class="flex items-center justify-between">
              <span class="font-semibold text-gray-700">Display Name:</span>
              <span class="text-gray-900">{{
                profileQuery.data()?.displayName
              }}</span>
            </div>
            <p-divider></p-divider>
            <div class="flex items-center justify-between">
              <span class="font-semibold text-gray-700">Account Status:</span>
              <p-tag value="Active" severity="success"></p-tag>
            </div>
          </div>
        </p-card>
      </div>

      <!-- Quick Actions -->
      <div class="space-y-4">
        <p-card header="Quick Actions" styleClass="h-fit shadow-md">
          <div class="space-y-3">
            <p-button
              label="Edit Profile"
              icon="pi pi-user-edit"
              [rounded]="true"
              class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors duration-200"
              (click)="editProfile()"
              aria-label="Edit profile"
            ></p-button>
            <p-button
              label="Change Password"
              icon="pi pi-lock"
              [outlined]="true"
              [rounded]="true"
              class="w-full py-3 border border-gray-300 hover:bg-gray-50 text-gray-700 font-semibold rounded-lg transition-colors duration-200"
              (click)="changePassword()"
              aria-label="Change password"
            ></p-button>
            <p-button
              label="View Orders"
              icon="pi pi-shopping-bag"
              [outlined]="true"
              [rounded]="true"
              class="w-full py-3 border border-gray-300 hover:bg-gray-50 text-gray-700 font-semibold rounded-lg transition-colors duration-200"
              (click)="viewOrders()"
              aria-label="View orders"
            ></p-button>
          </div>
        </p-card>

        <p-card header="Account Security" styleClass="h-fit shadow-md">
          <div class="space-y-3">
            <div class="flex items-center justify-between">
              <span class="text-sm text-gray-600">Two-Factor Auth</span>
              <p-tag value="Disabled" severity="warning"></p-tag>
            </div>
            <p-button
              label="Enable 2FA"
              icon="pi pi-shield"
              [rounded]="true"
              class="w-full py-2 bg-yellow-600 hover:bg-yellow-700 text-white font-semibold rounded-lg transition-colors duration-200"
              (click)="enable2FA()"
              aria-label="Enable two-factor authentication"
            ></p-button>
          </div>
        </p-card>
      </div>
    </div>

    <!-- Account Statistics -->
    <div class="mt-8">
      <p-card header="Account Statistics" styleClass="shadow-md">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center">
            <div class="text-3xl font-bold text-blue-600">0</div>
            <div class="text-sm text-gray-600">Total Orders</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-green-600">$0.00</div>
            <div class="text-sm text-gray-600">Total Spent</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-purple-600">0</div>
            <div class="text-sm text-gray-600">Wishlist Items</div>
          </div>
        </div>
      </p-card>
    </div>
    }
  </div>
</div>

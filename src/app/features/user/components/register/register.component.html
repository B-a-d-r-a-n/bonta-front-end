<div class="flex items-center justify-center min-h-screen bg-gray-100 p-4">
  <p-card styleClass="w-full max-w-lg shadow-2xl rounded-2xl overflow-hidden">
    <ng-template pTemplate="header">
      <div class="bg-primary-600 text-white p-8 text-center">
        <h2 class="text-3xl font-bold">Create an Account</h2>
        <p class="opacity-80">Join our community and start shopping today!</p>
      </div>
    </ng-template>

    <form
      [formGroup]="registerForm"
      (ngSubmit)="onSubmit()"
      class="flex flex-col gap-6 p-6"
    >
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Display Name -->
        <div class="flex flex-col gap-1">
          <label for="displayName" class="font-semibold text-gray-700"
            >Full Name</label
          >
          <input
            pInputText
            id="displayName"
            formControlName="displayName"
            placeholder="e.g., Jane Doe"
            class="w-full"
            [class.p-invalid]="isInvalid('displayName')"
          />
          @if (isInvalid('displayName')) {
          <p-message severity="error" text="Full name is required." /> }
        </div>

        <!-- Username -->
        <div class="flex flex-col gap-1">
          <label for="userName" class="font-semibold text-gray-700"
            >Username</label
          >
          <input
            pInputText
            id="userName"
            formControlName="userName"
            placeholder="e.g., janedoe99"
            class="w-full"
            [class.p-invalid]="isInvalid('userName')"
          />
          @if (isInvalid('userName')) {
          <p-message severity="error" text="Username is required." /> }
        </div>
      </div>

      <!-- Email -->
      <div class="flex flex-col gap-1">
        <label for="email" class="font-semibold text-gray-700"
          >Email Address</label
        >
        <input
          pInputText
          id="email"
          type="email"
          formControlName="email"
          placeholder="you@example.com"
          class="w-full"
          [class.p-invalid]="isInvalid('email')"
        />
        @if (isInvalid('email')) {
        <p-message
          severity="error"
          [text]="
            registerForm.get('email')?.hasError('required')
              ? 'Email is required.'
              : 'Invalid email format.'
          "
        />
        }
      </div>

      <!-- Password -->
      <div class="flex flex-col gap-1">
        <label for="password" class="font-semibold text-gray-700"
          >Password</label
        >
        <p-password
          id="password"
          formControlName="password"
          placeholder="Choose a strong password"
          [toggleMask]="true"
          styleClass="w-full"
          inputStyleClass="w-full"
          [feedback]="true"
          [class.p-invalid]="isInvalid('password')"
        />
        @if (isInvalid('password')) {
        <p-message
          severity="error"
          [text]="
            registerForm.get('password')?.hasError('required')
              ? 'Password is required.'
              : 'Password must be at least 6 characters.'
          "
        />
        }
      </div>

      <!-- Confirm Password -->
      <div class="flex flex-col gap-1">
        <label for="confirmPassword" class="font-semibold text-gray-700"
          >Confirm Password</label
        >
        <p-password
          id="confirmPassword"
          formControlName="confirmPassword"
          placeholder="Re-enter your password"
          [toggleMask]="true"
          [feedback]="false"
          styleClass="w-full"
          inputStyleClass="w-full"
          [class.p-invalid]="
            registerForm.hasError('passwordMismatch') &&
            registerForm.get('confirmPassword')?.touched
          "
        />
        @if (registerForm.hasError('passwordMismatch') &&
        registerForm.get('confirmPassword')?.touched) {
        <p-message severity="error" text="Passwords do not match." />
        }
      </div>

      <!-- General Error Message -->
      @if (errorMessage()) {
      <p-message severity="error" [text]="errorMessage()!"></p-message>
      }

      <!-- Submit Button -->
      <p-button
        type="submit"
        label="Create Account"
        [loading]="isLoading()"
        [disabled]="registerForm.invalid || isLoading()"
        styleClass="w-full justify-center mt-2"
        size="large"
      ></p-button>
    </form>

    <ng-template pTemplate="footer">
      <div
        class="text-center text-sm text-gray-600 p-6 border-t border-gray-200"
      >
        <span>Already have an account? </span>
        <a
          routerLink="/user/login"
          class="font-semibold text-primary-600 hover:underline"
          >Log in</a
        >
      </div>
    </ng-template>
  </p-card>
</div>
